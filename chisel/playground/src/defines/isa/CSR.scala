package cpu.defines

import chisel3._
import chisel3.util._

object CSROpType {
  def write  = "b001".U
  def set    = "b010".U
  def clear  = "b011".U
  def writei = "b101".U
  def seti   = "b110".U
  def cleari = "b111".U
}

object RVCSRInstr extends HasInstrType {
  def CSRRW  = BitPat("b???????_?????_?????_001_?????_1110011")
  def CSRRS  = BitPat("b???????_?????_?????_010_?????_1110011")
  def CSRRC  = BitPat("b???????_?????_?????_011_?????_1110011")
  def CSRRWI = BitPat("b???????_?????_?????_101_?????_1110011")
  def CSRRSI = BitPat("b???????_?????_?????_110_?????_1110011")
  def CSRRCI = BitPat("b???????_?????_?????_111_?????_1110011")

  val table = Array(
    CSRRW  -> List(InstrI, FuType.csr, 0.U(2.W) ## CSROpType.write),
    CSRRS  -> List(InstrI, FuType.csr, 0.U(2.W) ## CSROpType.set),
    CSRRC  -> List(InstrI, FuType.csr, 0.U(2.W) ## CSROpType.clear),
    CSRRWI -> List(InstrI, FuType.csr, 0.U(2.W) ## CSROpType.writei),
    CSRRSI -> List(InstrI, FuType.csr, 0.U(2.W) ## CSROpType.seti),
    CSRRCI -> List(InstrI, FuType.csr, 0.U(2.W) ## CSROpType.cleari)
  )
}